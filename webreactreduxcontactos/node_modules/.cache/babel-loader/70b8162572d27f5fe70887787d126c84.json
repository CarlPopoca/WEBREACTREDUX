{"ast":null,"code":"import _defineProperty from\"C:\\\\PROYECTOS\\\\VisualStudioNET\\\\WEBREACTREDUXCONTACTOS\\\\webreactreduxcontactos\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:\\\\PROYECTOS\\\\VisualStudioNET\\\\WEBREACTREDUXCONTACTOS\\\\webreactreduxcontactos\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\PROYECTOS\\\\VisualStudioNET\\\\WEBREACTREDUXCONTACTOS\\\\webreactreduxcontactos\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\PROYECTOS\\\\VisualStudioNET\\\\WEBREACTREDUXCONTACTOS\\\\webreactreduxcontactos\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\PROYECTOS\\\\VisualStudioNET\\\\WEBREACTREDUXCONTACTOS\\\\webreactreduxcontactos\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\PROYECTOS\\\\VisualStudioNET\\\\WEBREACTREDUXCONTACTOS\\\\webreactreduxcontactos\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component,Fragment}from'react';import{Redirect}from'react-router-dom';import AlertaError from'../../componentes/AlertaError';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{saveUsuarios,iniciarSesionUsuario}from'../../actions/actionsUsuarios';import{iniciarSesion}from'../../actions/actionsIniciarSesion';import{connect}from'react-redux';var RegistrarUsuario=/*#__PURE__*/function(_Component){_inherits(RegistrarUsuario,_Component);function RegistrarUsuario(props){var _this;_classCallCheck(this,RegistrarUsuario);_this=_possibleConstructorReturn(this,_getPrototypeOf(RegistrarUsuario).call(this,props));var token=localStorage.getItem(\"token\");var loggedIn=true;if(token==null){loggedIn=false;}_this.state={loading:false,alert_message:'',datosUsuario:{Email:'',Password:'',ConfirmPassword:''},loggedIn:loggedIn,isNullEmail:'',isNullPassword:'',isNullComfirmPassword:''};return _this;}_createClass(RegistrarUsuario,[{key:\"iniciarSesion\",value:function iniciarSesion(){var _this2=this;this.props.iniciarSesion(this.state.datosUsuario).then(function(response){//Se genera el token\nlocalStorage.setItem(\"token\",\"jasdajalkcecklwcljekwej\");//Se setea que ingreso\n_this2.setState({loggedIn:true,alert_message:'',datosUsuario:{Email:'',Password:'',ConfirmPassword:''}});},function(err){return err.response.json().then(function(){//Entra cuando los errores son superficiales, por ejemplo cuando los datos que se capturan no \n//coinciden con el tipo de dato \n_this2.setState({isError:'true',alert_message:'El usuario no pudo iniciar sesión'});});}).catch(function(error){//entra cuando los errores se propagan desde la base de datos, por ejemplo cuando la logitud de un \n//  es superior al campo de la base de datos\n_this2.setState({isError:'true',alert_message:'El usuario no pudo iniciar sesión'});});}},{key:\"validacionControles\",value:function validacionControles(){if(this.state.datosUsuario.Email==''&&this.state.datosUsuario.Password==''&&this.state.datosUsuario.ConfirmPassword==''){this.setState({alert_message:'Introduzca los datos que se le solicitan',isNullEmail:'true',isNullPassword:'true',isNullComfirmPassword:'true'});return false;}if(this.state.datosUsuario.Password.length<10){this.setState({alert_message:'El password debe tener diez caracteres',isNullPassword:'true'});return false;}if(this.state.datosUsuario.ConfirmPassword.length<10){this.setState({alert_message:'La confirmación del password debe tener diez caracteres',isNullComfirmPassword:'true'});return false;}if(this.state.datosUsuario.Password!=this.state.datosUsuario.ConfirmPassword){this.setState({alert_message:'El password y la confirmación del password deben ser indenticos',isNullPassword:'true',isNullComfirmPassword:'true'});return false;}return true;}},{key:\"submitForm\",value:function submitForm(){var _this3=this;var valControles=this.validacionControles();if(valControles){this.setState({loading:true});this.props.saveUsuarios(this.state.datosUsuario).then(function(response){_this3.iniciarSesion();},function(err){return err.response.json().then(function(){//Entra cuando los errores son superficiales, por ejemplo cuando los datos que se capturan no \n//coinciden con el tipo de dato \n_this3.setState({loading:false,isError:'true',alert_message:'No se pudo agregar el usuario'});});}).catch(function(error){//entra cuando los errores se propagan desde la base de datos, por ejemplo cuando la logitud de un \n//  es superior al campo de la base de datos\n_this3.setState({loading:false,isError:'true',alert_message:'No se pudo agregar el usuario'});});}}},{key:\"validacionBoton\",value:function validacionBoton(e){if(e=='true'){return'red-icon';}if(e=='false'){return'green-icon';}return'';}},{key:\"render\",value:function render(){var _this4=this,_React$createElement;var loading=this.state.loading;if(this.state.loggedIn===true){//Otra forma de hacer redirect\n// this.props.history.push(\"/\")\nreturn React.createElement(Redirect,{to:\"/\"});}return React.createElement(\"div\",{id:\"cover-caption\"},this.state.alert_message!=\"\"?React.createElement(AlertaError,{mensaje:this.state.alert_message}):null,React.createElement(\"div\",{id:\"container\",className:\"container\"},React.createElement(\"div\",{className:\"row\"},React.createElement(\"div\",{className:\"col-sm-6 offset-sm-4 text-center\"},React.createElement(\"h1\",{className:\"col-sm-7 display-5  my-4\"},\"Registrar\"),React.createElement(\"div\",{className:\"info-form col-sm-7\"},React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"div\",{className:\"input-group\"},React.createElement(\"div\",{className:\"input-group-prepend\"},React.createElement(\"div\",{className:\"input-group-text bg-white\"},React.createElement(\"i\",{className:this.validacionBoton(this.state.isNullEmail)},\"  \",React.createElement(FontAwesomeIcon,{className:\"mr-1\",icon:\"user-circle\"})))),React.createElement(\"input\",(_React$createElement={type:\"email\",className:\"form-control\"},_defineProperty(_React$createElement,\"type\",\"text\"),_defineProperty(_React$createElement,\"placeholder\",\"Usuario\"),_defineProperty(_React$createElement,\"name\",\"nombreUsuario\"),_defineProperty(_React$createElement,\"value\",this.state.datosUsuario.Email),_defineProperty(_React$createElement,\"onChange\",function onChange(e){var datosUsuario=_this4.state.datosUsuario;datosUsuario.Email=e.target.value;_this4.setState({datosUsuario:datosUsuario});}),_defineProperty(_React$createElement,\"required\",\"true\"),_defineProperty(_React$createElement,\"onBlur\",function onBlur(e){if(e.target.value==''){_this4.setState({isNullEmail:'true'});}else{_this4.setState({isNullEmail:'false',alert_message:''});}}),_React$createElement)))),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"div\",{className:\"input-group\"},React.createElement(\"div\",{className:\"input-group-prepend\"},React.createElement(\"div\",{className:\"input-group-text bg-white\"},React.createElement(\"i\",{className:this.validacionBoton(this.state.isNullPassword)},\"  \",React.createElement(FontAwesomeIcon,{className:\"mr-1\",icon:\"key\"})))),React.createElement(\"input\",{className:\"form-control\",type:\"password\",placeholder:\"Password\",name:\"password\",value:this.state.datosUsuario.Password,onChange:function onChange(e){var datosUsuario=_this4.state.datosUsuario;datosUsuario.Password=e.target.value;_this4.setState({datosUsuario:datosUsuario});},required:\"true\",maxlength:\"10\",minlength:\"10\",onBlur:function onBlur(e){if(e.target.value==''){_this4.setState({isNullPassword:'true'});}else{_this4.setState({isNullPassword:'false',alert_message:''});}}}))),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"div\",{className:\"input-group\"},React.createElement(\"div\",{className:\"input-group-prepend\"},React.createElement(\"div\",{className:\"input-group-text bg-white\"},React.createElement(\"i\",{className:this.validacionBoton(this.state.isNullComfirmPassword)},\"  \",React.createElement(FontAwesomeIcon,{className:\"mr-1\",icon:\"key\"})))),React.createElement(\"input\",{className:\"form-control\",type:\"password\",placeholder:\"Confirmar password\",name:\"confirmarPassword\",value:this.state.datosUsuario.ConfirmPassword,onChange:function onChange(e){var datosUsuario=_this4.state.datosUsuario;datosUsuario.ConfirmPassword=e.target.value;_this4.setState({datosUsuario:datosUsuario});},required:\"true\",maxlength:\"10\",minlength:\"10\",onBlur:function onBlur(e){if(e.target.value==''){_this4.setState({isNullComfirmPassword:'true'});}else{_this4.setState({isNullComfirmPassword:'false',alert_message:''});}}}))),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"button\",{className:\"btn btn-success\",onClick:this.submitForm.bind(this)},loading?React.createElement(FontAwesomeIcon,{className:\"mr-2\",icon:\"sync-alt\",spin:true}):React.createElement(FontAwesomeIcon,{className:\"mr-2\",icon:\"database\"}),\"Guardar\")))))));}}]);return RegistrarUsuario;}(Component);function mapStateToProps(state){return{usuarios:state.usuarios,login:state.login};}export default connect(mapStateToProps,{saveUsuarios:saveUsuarios,iniciarSesion:iniciarSesion})(RegistrarUsuario);","map":{"version":3,"sources":["C:\\PROYECTOS\\VisualStudioNET\\WEBREACTREDUXCONTACTOS\\webreactreduxcontactos\\src\\componentes\\seguridad\\RegistrarUsuario.js"],"names":["React","Component","Fragment","Redirect","AlertaError","FontAwesomeIcon","saveUsuarios","iniciarSesionUsuario","iniciarSesion","connect","RegistrarUsuario","props","token","localStorage","getItem","loggedIn","state","loading","alert_message","datosUsuario","Email","Password","ConfirmPassword","isNullEmail","isNullPassword","isNullComfirmPassword","then","response","setItem","setState","err","json","isError","catch","error","length","valControles","validacionControles","e","validacionBoton","target","value","submitForm","bind","mapStateToProps","usuarios","login"],"mappings":"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","sourcesContent":["import React, {Component, Fragment} from 'react'\r\nimport {Redirect} from 'react-router-dom'\r\nimport AlertaError from '../../componentes/AlertaError';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport {saveUsuarios, iniciarSesionUsuario} from '../../actions/actionsUsuarios';\r\nimport {iniciarSesion} from '../../actions/actionsIniciarSesion';\r\nimport {connect} from 'react-redux';\r\n\r\nclass RegistrarUsuario extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    const token = localStorage.getItem(\"token\");\r\n    let loggedIn = true;\r\n    if (token==null){\r\n      loggedIn = false;\r\n    }\r\n    this.state = {\r\n      loading: false,\r\n      alert_message:'',\r\n      datosUsuario: {\r\n        Email: '',\r\n        Password: '',\r\n        ConfirmPassword: ''\r\n      },\r\n      loggedIn,\r\n      isNullEmail: '',\r\n      isNullPassword: '',\r\n      isNullComfirmPassword: ''\r\n    }\r\n  }\r\n  iniciarSesion()\r\n  {\r\n      this.props.iniciarSesion(this.state.datosUsuario).then(\r\n        (response)=>{\r\n          //Se genera el token\r\n          localStorage.setItem(\"token\", \"jasdajalkcecklwcljekwej\");\r\n            //Se setea que ingreso\r\n            this.setState({\r\n              loggedIn: true,\r\n              alert_message: '',\r\n              datosUsuario: {\r\n                Email: '',\r\n                Password: '',\r\n                ConfirmPassword: ''\r\n                  }\r\n                });\r\n        }, \r\n        (err) => err.response.json().then(()=>{\r\n          //Entra cuando los errores son superficiales, por ejemplo cuando los datos que se capturan no \r\n          //coinciden con el tipo de dato \r\n          this.setState({\r\n            isError:'true',\r\n            alert_message: 'El usuario no pudo iniciar sesión'\r\n          })\r\n        })\r\n      ).catch(error=>{\r\n        //entra cuando los errores se propagan desde la base de datos, por ejemplo cuando la logitud de un \r\n        //  es superior al campo de la base de datos\r\n        this.setState({\r\n          isError:'true',\r\n          alert_message: 'El usuario no pudo iniciar sesión'\r\n        });\r\n      });\r\n  }\r\n\r\n   validacionControles() {\r\n\r\n     if (this.state.datosUsuario.Email=='' && this.state.datosUsuario.Password=='' && this.state.datosUsuario.ConfirmPassword=='')\r\n     {\r\n       this.setState({\r\n         alert_message: 'Introduzca los datos que se le solicitan',\r\n         isNullEmail: 'true',\r\n         isNullPassword: 'true',\r\n         isNullComfirmPassword: 'true'\r\n       });\r\n       return false;\r\n     }\r\n\r\n     if (this.state.datosUsuario.Password.length < 10)\r\n     {\r\n       this.setState({\r\n         alert_message: 'El password debe tener diez caracteres',\r\n         isNullPassword: 'true',\r\n       });\r\n        return false;\r\n     }\r\n    if (this.state.datosUsuario.ConfirmPassword.length < 10)\r\n    {\r\n      this.setState({\r\n        alert_message: 'La confirmación del password debe tener diez caracteres',\r\n        isNullComfirmPassword: 'true',\r\n      });\r\n       return false;\r\n    }\r\n    if (this.state.datosUsuario.Password != this.state.datosUsuario.ConfirmPassword)\r\n    {\r\n      this.setState({\r\n        alert_message: 'El password y la confirmación del password deben ser indenticos',\r\n        isNullPassword: 'true',\r\n        isNullComfirmPassword: 'true'\r\n      });\r\n      return false;\r\n    }\r\n     return true;\r\n  }\r\n\r\n  submitForm()\r\n  {\r\n    let valControles = this.validacionControles();\r\n    if (valControles){\r\n      this.setState({\r\n        loading: true\r\n      });\r\n      this.props.saveUsuarios(this.state.datosUsuario).then(\r\n        (response)=>{\r\n          this.iniciarSesion();\r\n        }, \r\n        (err) => err.response.json().then(()=>{\r\n          //Entra cuando los errores son superficiales, por ejemplo cuando los datos que se capturan no \r\n          //coinciden con el tipo de dato \r\n          this.setState({\r\n            loading: false,\r\n            isError: 'true',\r\n            alert_message: 'No se pudo agregar el usuario'\r\n          })\r\n        }\r\n        )\r\n      ).catch(error=>{\r\n        //entra cuando los errores se propagan desde la base de datos, por ejemplo cuando la logitud de un \r\n        //  es superior al campo de la base de datos\r\n        this.setState({\r\n          loading: false,\r\n          isError:'true',\r\n          alert_message: 'No se pudo agregar el usuario'\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\nvalidacionBoton(e){\r\n  if (e == 'true'){\r\n    return 'red-icon'\r\n  }\r\n  if (e == 'false'){\r\n    return 'green-icon'\r\n  }\r\n  return '';\r\n}\r\n\r\nrender(){\r\n  const {loading} = this.state;\r\n  if (this.state.loggedIn===true){\r\n    //Otra forma de hacer redirect\r\n    // this.props.history.push(\"/\")\r\n    return <Redirect  to=\"/\" />\r\n  }\r\n  return (\r\n\r\n    <div id=\"cover-caption\">\r\n\r\n        {this.state.alert_message!=\"\"?<AlertaError mensaje={this.state.alert_message} />:null}\r\n        <div id=\"container\" className=\"container\">\r\n\r\n            <div className=\"row\">\r\n                <div className=\"col-sm-6 offset-sm-4 text-center\">\r\n                    <h1 className=\"col-sm-7 display-5  my-4\">Registrar</h1>\r\n                    <div className=\"info-form col-sm-7\">\r\n                          <div className=\"form-group\">\r\n                            <div className=\"input-group\">\r\n                              <div className=\"input-group-prepend\">\r\n                                <div className=\"input-group-text bg-white\">\r\n                                  <i className= {this.validacionBoton(this.state.isNullEmail)}>  <FontAwesomeIcon className=\"mr-1\" icon=\"user-circle\" /></i>\r\n                                </div>\r\n                              </div>\r\n                              <input type=\"email\" className=\"form-control\" type= \"text\" placeholder=\"Usuario\" name=\"nombreUsuario\" value={this.state.datosUsuario.Email} onChange={(e)=>{\r\n                                let {datosUsuario} = this.state;\r\n                                datosUsuario.Email = e.target.value;\r\n                                this.setState({datosUsuario});\r\n                              }} required=\"true\"\r\n                              onBlur={(e)=>{\r\n                                if (e.target.value == '')\r\n                                  {\r\n                                    this.setState({isNullEmail: 'true'});\r\n                                  }else {\r\n                                    this.setState({isNullEmail: 'false', alert_message: ''});\r\n                                  }\r\n                                }} />\r\n                            </div>\r\n                          </div>\r\n\r\n                          <div className=\"form-group\">\r\n                            <div className=\"input-group\">\r\n                               <div className=\"input-group-prepend\">\r\n                                 <div className=\"input-group-text bg-white\">\r\n                                   <i className= {this.validacionBoton(this.state.isNullPassword)}>  <FontAwesomeIcon className=\"mr-1\" icon=\"key\" /></i>\r\n                                 </div>\r\n                               </div>\r\n                                <input className=\"form-control\" type= \"password\" placeholder=\"Password\" name=\"password\" value={this.state.datosUsuario.Password} onChange={(e)=>{\r\n                                  let {datosUsuario} = this.state;\r\n                                  datosUsuario.Password = e.target.value;\r\n                                  this.setState({datosUsuario});\r\n                                }}  required=\"true\" maxlength=\"10\" minlength=\"10\"\r\n                                onBlur={(e)=>{\r\n                                  if (e.target.value == '')\r\n                                    {\r\n                                      this.setState({isNullPassword: 'true'});\r\n                                    }else {\r\n                                      this.setState({isNullPassword: 'false', alert_message: ''});\r\n                                    }\r\n                                  }}/>\r\n                              </div>\r\n                          </div>\r\n\r\n                          <div className=\"form-group\">\r\n                            <div className=\"input-group\">\r\n                               <div className=\"input-group-prepend\">\r\n                                 <div className=\"input-group-text bg-white\">\r\n                                   <i className= {this.validacionBoton(this.state.isNullComfirmPassword)}>  <FontAwesomeIcon className=\"mr-1\" icon=\"key\" /></i>\r\n                                 </div>\r\n                               </div>\r\n                                <input className=\"form-control\" type= \"password\" placeholder=\"Confirmar password\" name=\"confirmarPassword\" value={this.state.datosUsuario.ConfirmPassword} onChange={(e)=>{\r\n                                  let {datosUsuario} = this.state;\r\n                                  datosUsuario.ConfirmPassword = e.target.value;\r\n                                  this.setState({datosUsuario});\r\n                                }}  required=\"true\" maxlength=\"10\" minlength=\"10\"\r\n                                onBlur={(e)=>{\r\n                                  if (e.target.value == '')\r\n                                    {\r\n                                      this.setState({isNullComfirmPassword: 'true'});\r\n                                    }else {\r\n                                      this.setState({isNullComfirmPassword: 'false', alert_message: ''});\r\n                                    }\r\n                                  }}/>\r\n                              </div>\r\n                            </div>\r\n                            <div className=\"form-group\">\r\n                              <button className=\"btn btn-success\" onClick={this.submitForm.bind(this)}>\r\n                                {loading?<FontAwesomeIcon className=\"mr-2\" icon=\"sync-alt\" spin />: <FontAwesomeIcon className=\"mr-2\" icon=\"database\" />}\r\n                                Guardar\r\n                              </button>\r\n                            </div>\r\n                      </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )\r\n      }\r\n}\r\nfunction mapStateToProps (state)\r\n{\r\n  return {\r\n    usuarios: state.usuarios,\r\n    login: state.login\r\n  }\r\n}\r\nexport default connect(mapStateToProps, {saveUsuarios, iniciarSesion})(RegistrarUsuario);\r\n"]},"metadata":{},"sourceType":"module"}